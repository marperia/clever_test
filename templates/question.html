{% extends 'base.html' %}
{% block content %}
    {% if quest_time != 0 %}
        <script>
        var quest_time_ms = {{ quest_time }} * 1000;
        window.setTimeout(function(){
                     window.location = "{% url 'question' test_id=question.test_id q_num=next_question_id %}";
                 },  quest_time_ms);
        </script>
    {% endif %}

    {% if time_left != 0 %}
        <script>
            var timer = document.getElementById('ovoshi');
            var time_left = {{ time_left }};
            window.setInterval(function () {
                alert(typeof time_left);
                alert('time - 1000 ' + toString(time_left - 1000));
                time_left = time_left - 1000;
                timer.innerText = time_left;
                alert(time_left);
            }, 1000)
        </script>
    {% endif %}
    <div class="col-md-8 col-md-offset-2">
        {% for error in errors %}
            <div class="alert alert-danger alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <p>{{ error }}</p>
            </div>
        {% endfor %}
        <p>{{ question.text }}</p>
        {% if time_left != 0 %}
            <div id="ovoshi"></div>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            <p>{{ form.text }}</p>
            <p><input type="submit" class="btn btn-success" value="Отправить"></p>
        </form>
        <a class="btn btn-primary" href="{% url 'question' test_id=question.test_id q_num=next_question_id %}">Дальше »</a>
    </div>
{% endblock %}